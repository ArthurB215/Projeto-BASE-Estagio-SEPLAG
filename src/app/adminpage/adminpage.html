<div class="profile-container">
  <!-- Coluna esquerda -->
  <div class="profile-sidebar">
    <!-- Foto + nome -->
    <div class="profile-photo-card">
      <div class="photo-placeholder"></div>
      <div class="name">Lucas Tri Nascimento</div>
    </div>

    <!-- Permiss√µes -->
    <div class="profile-permissions">
      <div class="title">Permiss√µes</div>
      <button class="option" (click)="goAcesspage()" routerLink="/acessos">Acessos</button>

      <!-- Bot√£o que abre o submenu -->
      <button type="button" class="option usuarios-btn" (click)="toggleUsuariosSubmenu()"
        [attr.aria-expanded]="isUsuariosSubmenuVisible" aria-haspopup="true">
        Usu√°rios
        <span class="caret" [class.open]="isUsuariosSubmenuVisible">‚ñæ</span>
      </button>

      <!-- Submenu -->
      <div *ngIf="isUsuariosSubmenuVisible" class="submenu" role="menu">
        <button type="button" (click)="goAddUserPage()" class="sub-option">Adicionar Usu√°rio</button>
        <button type="button" (click)="goEditUserPage()" class="sub-option">Editar Usu√°rio</button>
        <button type="button" (click)="goDeleteUser()" class="sub-option">Excluir Usu√°rio</button>
      </div>

      <button type="button" class="option usuarios-btn" (click)="toggleGruposSubmenu()"
        [attr.aria-expanded]="isGruposSubmenuVisible" aria-haspopup="true">
        Grupos de Usu√°rio
        <span class="caret" [class.open]="isGruposSubmenuVisible">‚ñæ</span>
      </button>

      <div *ngIf="isGruposSubmenuVisible" class="submenu" role="menu">
        <button type="button" (click)="goAddGroupPage()" class="sub-option">Adicionar Grupo</button>
        <button type="button" (click)="goEditGroupPage()" class="sub-option">Editar Grupo</button>
        <button type="button" (click)="goDeleteGroupPage()" class="sub-option">Deletar Grupo</button>
      </div>
    </div>

    <!-- Seguran√ßa -->
    <div class="profile-security">
      <div class="title">Seguran√ßa</div>
      <button class="option" (click)="abrirModalSenha()">Alterar Senha</button>
    </div>

    <!-- Auditoria -->
    <div class="profile-security">
      <div class="title">Auditoria</div>
      <button class="option" (click)="goLogsPage()">Logs de auditoria</button>
    </div>
  </div>

  <!-- Coluna direita -->
  <div class="profile-content">
    <!-- Card: Dados pessoais -->
    <div class="card">
      <div class="card-header">
        <div class="title">DADOS PESSOAIS</div>

        <!-- wrapper absoluto √† direita -->
       <div class="actions">
          <!--  l√°pis (vis√≠vel quando n√£o est√° editando) -->
          <button class="icon-button" *ngIf="!isEditingPessoais" (click)="startEdit('pessoais')"
            aria-label="Editar dados pessoais">‚úé</button>

          <!-- confirmar / cancelar (quando em edi√ß√£o) -->
          <div class="icon-actions" *ngIf="isEditingPessoais">
            <button class="icon-button confirm" (click)="confirmEdit('pessoais')" aria-label="Confirmar">‚úî</button>
            <button class="icon-button cancel" (click)="cancelEdit('pessoais')" aria-label="Cancelar">‚úñ</button>
          </div>
        </div>
      </div>

      <div class="card-body">
        <!-- Exemplo: nome em modo edi√ß√£o -->
        <div class="row">
          <div class="col">
            <div class="label">Nome:</div>
            <div class="value" *ngIf="!isEditingPessoais">Lucas Tri Nascimento Costa</div>
            <input *ngIf="isEditingPessoais" type="text" value="Lucas Tri Nascimento Costa" />
          </div>
          <div class="col">
            <div class="label">Situa√ß√£o:</div>
            <div class="value ativo">ATIVO</div>
          </div>
        </div>

        <!-- Email -->
        <div class="row">
          <div class="col full">
            <div class="label">Email:</div>
            <div class="value" *ngIf="!isEditingPessoais">lucasexample@planejamento.mg.gov.br</div>
            <input *ngIf="isEditingPessoais" type="email" value="lucasexample@planejamento.mg.gov.br" />
          </div>
        </div>

        <!-- CPF e MASP -->
        <div class="row">
          <div class="col">
            <div class="label">CPF:</div>
            <div class="value" *ngIf="!isEditingPessoais">999.999.999-00</div>
            <input *ngIf="isEditingPessoais" type="text" value="999.999.999-00" />
          </div>
          <div class="col">
            <div class="label">MASP:</div>
            <div class="value" *ngIf="!isEditingPessoais">9999999-0</div>
            <input *ngIf="isEditingPessoais" type="text" value="9999999-0" />
          </div>
        </div>
      </div>
    </div>

    <!-- Card: Dados trabalhistas -->
    <div class="card">
      <div class="card-header">
        <div class="title">DADOS TRABALHISTAS</div>

        <div class="actions">
          <button class="icon-button" *ngIf="!isEditingTrabalhistas" (click)="startEdit('trabalhistas')">‚úé</button>

          <div class="icon-actions" *ngIf="isEditingTrabalhistas">
            <button class="icon-button confirm" (click)="confirmEdit('trabalhistas')">‚úî</button>
            <button class="icon-button cancel" (click)="cancelEdit('trabalhistas')">‚úñ</button>
          </div>
        </div>
      </div>

      <div class="card-body">
        <div class="row">
          <div class="col full">
            <div class="label">Secretaria/√ìrg√£o:</div>
            <div class="value" *ngIf="!isEditingTrabalhistas">
              Secretaria de Estado de Planejamento e Gest√£o ‚Äì SEPLAG/MG
            </div>
            <input *ngIf="isEditingTrabalhistas" type="text"
              value="Secretaria de Estado de Planejamento e Gest√£o ‚Äì SEPLAG/MG" />
          </div>
        </div>

        <div class="row">
          <div class="col">
            <div class="label">Pr√©dio:</div>
            <div class="value" *ngIf="!isEditingTrabalhistas">Gerais</div>
            <input *ngIf="isEditingTrabalhistas" type="text" value="Gerais" />
          </div>
          <div class="col">
            <div class="label">Andar:</div>
            <div class="value" *ngIf="!isEditingTrabalhistas">3¬∫ Andar</div>
            <input *ngIf="isEditingTrabalhistas" type="text" value="3¬∫ Andar" />
          </div>
        </div>

        <div class="row">
          <div class="col full">
            <div class="label">Telefone Comercial:</div>
            <div class="value" *ngIf="!isEditingTrabalhistas">(31) 3915-0000</div>
            <input *ngIf="isEditingTrabalhistas" type="text" value="(31) 3915-0000" />
          </div>
        </div>
      </div>
    </div>

    <div class="modal-overlay" *ngIf="mostrarModalSenha">
        <div class="modal-content">
          <h3>Recuperar Senha</h3>
          <p>Digite seu email para receber o link de redefini√ß√£o:</p>

          <input type="email" [(ngModel)]="emailRecuperacao" placeholder="Digite seu email"
            [disabled]="modalProcessando" />

          <div class="modal-buttons">
            <button class="btn-confirm" (click)="enviarEmailRecuperacao()"
              [disabled]="!emailValidoRecuperacao() || modalProcessando">
              Enviar
            </button>
            <button class="btn-cancel" (click)="fecharModalSenha()" [disabled]="modalProcessando">
              Cancelar
            </button>
          </div>

          <div *ngIf="modalSucesso" class="modal-success">
            üìß Se este email estiver cadastrado, voc√™ receber√° um link para redefinir sua senha.
          </div>
        </div>
      </div>
