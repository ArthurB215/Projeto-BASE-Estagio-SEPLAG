<div *ngIf="mostrarSucesso" class="popup-sucesso">
  Grupo deletado com sucesso!
</div>

<div *ngIf="mostrarConfirmacao" class="popup-confirmacao">
  <div class="popup-box">
    <p>Voc√™ realmente deseja apagar este grupo?</p>
    <button class="cancelar" (click)="cancelarCriacao()">Cancelar</button>
    <button class="confirmar" (click)="confirmarCriacao()">Sim</button>
  </div>
</div>

<div class="profile-container">
  <!-- Sidebar (j√° existente) -->
  <div class="profile-sidebar">
    <div class="profile-photo-card">
      <div class="photo-placeholder"></div>
      <div class="name">Lucas Tri Nascimento</div>
    </div>

    <div class="profile-permissions">
      <div class="title">Permiss√µes</div>
      <button class="option" (click)="goAcesspage()" routerLink="/acessos">Acessos</button>
      <button type="button" class="option usuarios-btn" (click)="toggleUsuariosSubmenu()"
        [attr.aria-expanded]="isUsuariosSubmenuVisible" aria-haspopup="true">
        Usu√°rios
        <span class="caret" [class.open]="isUsuariosSubmenuVisible">‚ñæ</span>
      </button>

      <div *ngIf="isUsuariosSubmenuVisible" class="submenu" role="menu">
        <button type="button" (click)="goAddUserPage()" class="sub-option">Adicionar Usu√°rio</button>
        <button type="button" (click)="goEditUserPage()" class="sub-option">Editar Usu√°rio</button>
        <button type="button" (click)="goDeleteUser()" class="sub-option">Excluir Usu√°rio</button>
      </div>

      <button type="button" class="option usuarios-btn" (click)="toggleGruposSubmenu()"
        [attr.aria-expanded]="isGruposSubmenuVisible" aria-haspopup="true">
        Grupos de Usu√°rio
        <span class="caret" [class.open]="isGruposSubmenuVisible">‚ñæ</span>
      </button>

      <div *ngIf="isGruposSubmenuVisible" class="submenu" role="menu">
        <button type="button" (click)="goAddGroupPage()" class="sub-option">Adicionar Grupo</button>
        <button type="button" (click)="goEditGroupPage()" class="sub-option">Editar Grupo</button>
      </div>
    </div>

    <div class="profile-security">
      <div class="title">Seguran√ßa</div>
      <button class="option" (click)="abrirModalSenha()">Alterar Senha</button>
    </div>
  </div>

  <div class="profile-content">
    <div class="card-add-group">
      <h2>DELETAR GRUPO</h2>

      <div class="form-section">
        <label for="groupSelect">Selecione o Grupo</label>
        <select id="groupSelect" [(ngModel)]="grupoSelecionado" (change)="carregarGrupo()" class="styled-select"
          [disabled]="formDisabled">
          <option value="" disabled selected hidden>Selecione</option>
          <option *ngFor="let grupo of grupos" [value]="grupo.id">{{ grupo.nome }}</option>
        </select>
      </div>

      <!-- Acessos (somente leitura, desabilitados) -->
      <div *ngIf="grupoSelecionado" class="form-section">
        <h3>Acessos</h3>
        <div class="checkbox-grid">
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['FiscWeb']" disabled /> FiscWeb</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['SevicosCA']" disabled /> SevicosCA</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['Ratear+']" disabled /> Ratear+</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['Radar Patrimonio']" disabled /> Radar
            Patrimonio</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['Teste']" disabled /> Teste</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['Example']" disabled /> Example</label>
          <label><input type="checkbox" [(ngModel)]="acessosCheckbox['PortalCA']" disabled /> PortalCA</label>
        </div>
      </div>

      <!-- Permiss√µes (somente leitura, desabilitados) -->
      <div *ngIf="grupoSelecionado" class="form-section">
        <h3>Permiss√µes</h3>
        <div class="checkbox-grid">
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Remover Usu√°rio']" disabled /> Remover
            Usu√°rio</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Adicionar Usu√°rio']" disabled /> Adicionar
            Usu√°rio</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Adicionar Grupo']" disabled /> Adicionar
            Grupo</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Remover Grupo']" disabled /> Remover
            Grupo</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Editar Usu√°rio']" disabled /> Editar
            Usu√°rio</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Example']" disabled /> Example</label>
          <label><input type="checkbox" [(ngModel)]="permissoesCheckbox['Teste de Valida√ß√£o']" disabled /> Teste de
            Valida√ß√£o</label>
        </div>
      </div>

      <!-- Senha -->
      <div *ngIf="grupoSelecionado" class="form-section">
        <label for="senhaConfirm">Digite sua senha para confirmar</label>
        <input id="senhaConfirm" type="password" [(ngModel)]="senhaConfirmacao" [disabled]="formDisabled"
          placeholder="Senha" />
      </div>

      <!-- Bot√£o -->
      <div *ngIf="grupoSelecionado">
        <button class="btn-create-group" (click)="abrirConfirmacao()" [disabled]="!formValido() || formDisabled">
          DELETAR GRUPO
        </button>
      </div>

      <div class="modal-overlay" *ngIf="mostrarModalSenha">
        <div class="modal-content">
          <h3>Recuperar Senha</h3>
          <p>Digite seu email para receber o link de redefini√ß√£o:</p>

          <input type="email" [(ngModel)]="emailRecuperacao" placeholder="Digite seu email"
            [disabled]="modalProcessando" />

          <div class="modal-buttons">
            <button class="btn-confirm" (click)="enviarEmailRecuperacao()"
              [disabled]="!emailValidoRecuperacao() || modalProcessando">
              Enviar
            </button>
            <button class="btn-cancel" (click)="fecharModalSenha()" [disabled]="modalProcessando">
              Cancelar
            </button>
          </div>

          <div *ngIf="modalSucesso" class="modal-success">
            üìß Se este email estiver cadastrado, voc√™ receber√° um link para redefinir sua senha.
          </div>
        </div>
      </div>
